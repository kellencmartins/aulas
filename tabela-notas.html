<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Teste</title>

        <style>
            #tabela, th, td {
                border: 1px solid black;
                border-collapse: collapse;
                border-radius: 16px;
                padding: 10px;
                margin-top: 15px;
                font-family: arial;
                width: 0%;
            }
        </style>

    </head>

    <body>
        <main>
            <button onclick="clicarBotao()">Incluir novo</button>

            <div id="incluir" style="display: none;">
                <label for="nome">Nome</label>
                <input type="text" id="nome" name="nome">

                <label for="nota">Nota</label>
                <input type="number" id="nota" name="nota">

                <button id="incluirAlunos" onclick="adicionarNovoAluno()"">Adicionar</button>
            </div>

            <table id='tabela'>
                <thead>
                    <tr>
                        <th class="titulo-nome">Nome</th>
                        <th class="titlo-nota">Nota</th>
                    </tr>
                </thead>
            
                <tbody></tbody>
            </table>

            <div>
                A média da nota dos alunos desta turma é: <div id="media"></div>
            </div>
        </main>

        <script>
            const tabela = document.getElementById('tabela');
            var dados = [];

            tabela.style.backgroundColor = '#fff';
            tabela.style.color = '#000';
        
            //retornar a div para a tela ao clicar no botão
            function clicarBotao() {
                document.getElementById('incluir').style.display = 'block';
            }

            //obter os valores dos inputs e incluir no array
            function  adicionarNovoAluno() {
                var nome = document.getElementById('nome').value;
                var nota = document.getElementById('nota').value;

                if (nome === '' || nota === '' ) {
                    alert('Por favor, preencha todos os campos.');
                    return;
                } 

                //construir estrutura do objeto
                var dadosAluno = {
                    nome: nome,
                    nota: nota
                }

                dados.push(dadosAluno);
    
                //limpar os inputs e reiniciar a div  
                document.getElementById('nome').value = '';
                document.getElementById('nota').value = '';
                document.getElementById('incluir').style.display = 'none';

                popularTabela();
            }


            function popularTabela() {
                const corpoTabela = tabela.querySelector('tbody');

                //limpar o corpo da tabela para receber os dados do array
                corpoTabela.innerHTML = '';

                //popular a tabela com os dados do array
                dados.forEach(aluno => {
                    const linha = document.createElement('tr');

                    linha.innerHTML = `
                        <td>${aluno.nome}</td>
                        <td>${aluno.nota}</td>
                    `;

                    corpoTabela.appendChild(linha);

                    obterAlunos()
                })


                function obterAlunos() {
                    let somaNota = 0;

                    for (let i = 0; i < linhas.length; i++) {
                        let numero = dados[i].nota;
                        somaNota += numero;
                    }

                    let mediaNota = somaNota / linhas.length;
                    let media = document.getElementById('media');
                    media.innerHTML = Math.floor(mediaNota);
                }
            }
        </script>
    </body>

</html>